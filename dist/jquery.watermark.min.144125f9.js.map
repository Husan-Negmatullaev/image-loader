{"version":3,"sources":["jquery.watermark.min.js"],"names":["$","window","document","undefined","pluginName","defaults","path","dataPath","text","textWidth","textSize","textColor","textBg","gravity","opacity","margin","fullOverlay","outputWidth","outputHeight","outputType","done","imgURL","src","fail","always","Plugin","element","options","settings","extend","_defaults","_name","init","prototype","_this","ele","set","actualPath","data","wmData","imgurl","type","cross","imageData","width","height","search","defer","Deferred","when","imgObj","wmObj","imgurltodata","dataURL","call","textwatermark","resolve","canvas","createElement","ctx","getContext","w","h","fillStyle","fillRect","textAlign","font","fillText","toDataURL","callback","img","Image","crossOrigin","onload","ctxH","rotate","Math","PI","drawImage","op","globalAlpha","wmW","wmH","pos","gLeft","gTop","wmNew","onerror","fn","watermark","each","jQuery"],"mappings":"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","file":"jquery.watermark.min.144125f9.js","sourceRoot":"..","sourcesContent":["/*  @preserve\n *  Project: jQuery plugin Watermark\n *  Description: Add watermark on images use HTML5 and Javascript.\n *  Author: Zzbaivong (devs.forumvi.com)\n *  Version: 1.0.2\n *  License: MIT\n */\n!function($,window,document,undefined){\"use strict\";var pluginName=\"watermark\",defaults={path:\"watermark.png\",dataPath:!1,text:\"\",textWidth:130,textSize:13,textColor:\"white\",textBg:\"rgba(0, 0, 0, 0.4)\",gravity:\"se\",opacity:.7,margin:0,fullOverlay:!1,outputWidth:\"auto\",outputHeight:\"auto\",outputType:\"jpeg\",done:function(imgURL){this.src=imgURL},fail:function(){},always:function(){}};function Plugin(element,options){this.element=element,this.settings=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}$.extend(Plugin.prototype,{init:function(){var _this=this,ele=_this.element,set=_this.settings,actualPath=set.dataPath?$(ele).data(set.dataPath):set.path,wmData={imgurl:actualPath,type:\"png\",cross:!0},imageData={imgurl:ele.src,cross:!0,type:set.outputType,width:set.outputWidth,height:set.outputHeight};0===actualPath.search(/data:image\\/(png|jpg|jpeg|gif);base64,/)&&(wmData.cross=!1),0===ele.src.search(/data:image\\/(png|jpg|jpeg|gif);base64,/)&&(imageData.cross=!1);var defer=$.Deferred();$.when(defer).done((function(imgObj){imageData.wmObj=imgObj,_this.imgurltodata(imageData,(function(dataURL){set.done.call(ele,dataURL),set.always.call(ele,dataURL)}))})),\"\"!==set.text&&(wmData.imgurl=_this.textwatermark(),wmData.cross=!1),_this.imgurltodata(wmData,(function(imgObj){defer.resolve(imgObj)}))},textwatermark:function(){var _this=this,set=this.settings,canvas=document.createElement(\"CANVAS\"),ctx=canvas.getContext(\"2d\"),w=set.textWidth,h=set.textSize+8;return canvas.width=w,canvas.height=h,ctx.fillStyle=set.textBg,ctx.fillRect(0,0,w,h),ctx.fillStyle=set.textColor,ctx.textAlign=\"center\",ctx.font=\"500 \"+set.textSize+\"px Sans-serif\",ctx.fillText(set.text,w/2,set.textSize+2),canvas.toDataURL()},imgurltodata:function(data,callback){var _this=this,set=this.settings,ele=this.element,img=new Image;data.cross&&(img.crossOrigin=\"Anonymous\"),img.onload=function(){var canvas=document.createElement(\"CANVAS\"),ctx=canvas.getContext(\"2d\"),w=this.width,h=this.height,ctxH;if(data.wmObj&&(\"auto\"!==data.width&&\"auto\"===data.height&&data.width<w?(h=h/w*data.width,w=data.width):\"auto\"===data.width&&\"auto\"!==data.height&&data.height<h?(w=w/h*data.height,h=data.height):\"auto\"!==data.width&&\"auto\"!==data.height&&data.width<w&&data.height<h&&(w=data.width,h=data.height)),\"w\"!==set.gravity&&\"e\"!==set.gravity||data.wmObj?(canvas.width=w,canvas.height=h,ctxH=0):(canvas.width=h,canvas.height=w,ctxH=-h,ctx.rotate(90*Math.PI/180)),\"jpeg\"===data.type&&(ctx.fillStyle=\"#ffffff\",ctx.fillRect(0,0,w,h)),ctx.drawImage(this,0,ctxH,w,h),data.wmObj){var op=set.opacity;op>0&&op<1&&(ctx.globalAlpha=set.opacity);var wmW=set.fullOverlay?w:data.wmObj.width,wmH=set.fullOverlay?h:data.wmObj.height,pos=set.margin,gLeft,gTop;switch(set.gravity){case\"nw\":gLeft=pos,gTop=pos;break;case\"n\":gLeft=w/2-wmW/2,gTop=pos;break;case\"ne\":gLeft=w-wmW-pos,gTop=pos;break;case\"w\":gLeft=pos,gTop=h/2-wmH/2;break;case\"e\":gLeft=w-wmW-pos,gTop=h/2-wmH/2;break;case\"sw\":gLeft=pos,gTop=h-wmH-pos;break;case\"s\":gLeft=w/2-wmW/2,gTop=h-wmH-pos;break;case\"c\":gLeft=w/2-wmW/2,gTop=(h-wmH)/2;break;default:gLeft=w-wmW-pos,gTop=h-wmH-pos}ctx.drawImage(data.wmObj,gLeft,gTop,wmW,wmH)}var dataURL=canvas.toDataURL(\"image/\"+data.type);if(\"function\"==typeof callback)if(data.wmObj)callback(dataURL);else{var wmNew=new Image;wmNew.src=dataURL,callback(wmNew)}canvas=null},img.onerror=function(){return set.fail.call(this,this.src),set.always.call(ele,this.src),!1},img.src=data.imgurl}}),$.fn.watermark=function(options){return this.each((function(){$.data(this,\"plugin_watermark\")||$.data(this,\"plugin_watermark\",new Plugin(this,options))}))}}(jQuery,window,document);"]}