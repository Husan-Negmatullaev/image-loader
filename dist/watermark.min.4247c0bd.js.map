{"version":3,"sources":["watermark.min.js"],"names":["e","l","k","document","c","f","m","b","n","o","Date","j","Image","src","complete","p","onload","applyWatermarks","a","width","offsetWidth","g","height","offsetHeight","setCanvasSize","drawImage","h","getImageData","d","data","length","i","putImageData","toDataURL","applyWatermark","indexOf","setTimeout","getElementsByClassName","tagName","toUpperCase","init","watermark","path","position","opacity","className","createElement","style","cssText","getContext","body","appendChild","wmark","window"],"mappings":"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","file":"watermark.min.4247c0bd.js","sourceRoot":"..","sourcesContent":["/* \r\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * \r\n * watermark.js - Create watermarked images with Canvas and JS\r\n *\r\n * Version: 1 (2011-04-04)\r\n * Copyright (c) 2011\tPatrick Wied ( http://www.patrick-wied.at )\r\n * This code is licensed under the terms of the MIT LICENSE\r\n *\r\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * \r\n */\r\n(function(e){var l=function(e){var k=e.document,c={},f={},m=\"watermark\",b=!1,n=\"bottom-right\",o=\"watermark.png?\"+ +new Date,j=127.5,l=function(){b=new Image;b.src=\"\";b.src=o;j!=255?b.complete?p():b.onload=function(){p()}:applyWatermarks()},p=function(){var a=b.width||b.offsetWidth,g=b.height||b.offsetHeight;setCanvasSize(a,g);f.drawImage(b,0,0);for(var h=f.getImageData(0,0,a,g),d=h.data,e=d.length,i=3;i<e;i+=4)d[i]=d[i]<j?d[i]:j;h.data=d;f.putImageData(h,0,0);b.onload=null;b.src=\"\";b.src=c.toDataURL(); b.width=a;b.height=g;applyWatermarks()};setCanvasSize=function(a,b){c.width=a;c.height=b};applyWatermark=function(a){c.width=a.width||a.offsetWidth;c.height=a.height||a.offsetHeight;f.drawImage(a,0,0);var g=n,h=0,d=0;d=g.indexOf(\"top\")!=-1?10:c.height-b.height-10;h=g.indexOf(\"left\")!=-1?10:c.width-b.width-10;f.drawImage(b,h,d);a.onload=null;a.src=c.toDataURL()};applyWatermarks=function(){setTimeout(function(){for(var a=k.getElementsByClassName(m),b=a.length;b--;){var c=a[b];if(c.tagName.toUpperCase()== \"IMG\")c.complete?applyWatermark(c):c.onload=function(){applyWatermark(this)}}},10)};return{init:function(a){a.watermark&&(b=a.watermark);a.path&&(o=a.path);a.position&&(n=a.position);a.opacity&&(j=255/(100/a.opacity));a.className&&(m=a.className);c=k.createElement(\"canvas\");c.style.cssText=\"display:none;\";f=c.getContext(\"2d\");k.body.appendChild(c);l()}}}(e);e.wmark=l})(window);"]}